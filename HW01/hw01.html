<!DOCTYPE html>

<html>

<head>
<style>

</style>
</head>
<h1>Homework01 (<a href="https://jsfiddle.net/iristang85/zn21t76b">jsfiddle)</a></h1>
<body> 

<div>
  <img src="https://imgur.com/PMVBPXb.png" 
  style="position:absolute;top:5vw;left:10vw;width:50vw;z-index:-1">
</div>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<p id='status'>Light is off</p>
<button id="toggle">
ON
</button>

<script>

var status = false;
var hue=0;
 $('#toggle').click ( function() {
	status = !status;
  if (status === true) {
  	$('#status').text('Light is on')
  	$('#toggle').text ('OFF');  
  } else {
 	 $('#status').text('Light is off')
  	$('#toggle').text ('ON');  
  }
});
class Light {
  constructor(t,l) {  
  	// create/append div dynamically
    // https://stackoverflow.com/questions/14004117/create-div-and-append-div-dynamically
    this.element = document.createElement ('div');
    //this = iDiv;
    this.element.id = 'light';
    // set element style attribute
    //https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style
    this.element.style.cssText = "position:absolute;width:25px;height:25px;border-radius:50px;z-index:1"; 
	  this.element.style.top = t;
    this.element.style.left = l;
    // CSS color property: https://www.w3schools.com/cssref/pr_text_color.asp
    // hsl: https://www.w3schools.com/colors/colors_hsl.asp
    this.element.style.background = "hsl(0, 0%, 75%)";
    document.getElementsByTagName('body')[0].appendChild(this.element);
  }

	changeColor() {
  	// https://stackoverflow.com/questions/45147661/javascript-recursion-within-a-class/45147713
    
    var self = this;
  	//var hue = Math.random()*300;
    hue=hue+36;
    if(hue>=360) hue=hue-360;
    setTimeout (function() { self.changeColor() } , 500);
    if(status==false){
    self.element.style.background="hsl(0, 0%, 75%)";  
    }
    else{
    self.element.style.background = "hsl(" + hue + ", 70%, 51%)";   
   }
		// setTimeout ( self.changeColor , 1000);  // why this is not working ...
  }

}

////////////////////////////////
init();

function init() {
  var light1 = new Light('14.5vw','32.5vw');
  light1.changeColor();
  var light2 = new Light('20vw','25vw');
  light2.changeColor();  
  var light3 = new Light('20.5vw','38vw');
  light3.changeColor();  
  var light4 = new Light('24vw','28vw');
  light4.changeColor();  
  var light5 = new Light('28vw','35vw');
  light5.changeColor(); 
  var light6 = new Light('30vw','28vw');
  light6.changeColor();  
  var light7 = new Light('34vw','20vw');
  light7.changeColor();  
  var light8 = new Light('34vw','40vw');
  light8.changeColor(); 
  
}



</script>
</body>

</html>